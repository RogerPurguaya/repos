<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <record id="glass_calculator_form_view" model="ir.ui.view">
        <field name="name">glass.sale.calculator.form.view</field>
        <field name="model">glass.sale.calculator</field>
        <field name="inherit_id" ref="sale_calculadora_it.glass_calculator_form_view"/>
        <field name="arch" type="xml">
            
            <field name="qty_invoiced" position="before">
                <field name="is_locked" invisible="1"/>
            </field>

             <field name="line_ids" position="attributes">
                <attribute name="attrs">{'readonly':[('is_locked','!=', False)]}</attribute>
            </field>
            <field name="area" position="after">
                <field name="glass_order_id" string="O.P." readonly="1"/>
            </field>
            <field name="quantity" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </field>
            <field name="crystal_num" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </field>
            <field name="base1" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </field>
            <field name="base2" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </field>
            <field name="height1" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="height2" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="descuadre" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="page_number" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="page_number" position="after">
                <field name="polished_id" string="Pulido_cristal" attrs="{'readonly':[('glass_order_id','!=', False)]}"/>
                <field name="entalle" string="Ent." attrs="{'readonly':[('glass_order_id','!=', False)]}"/>
                <field name="lavado" string="Desc." attrs="{'readonly':[('glass_order_id','!=', False)]}"/>
                <field name="arenado" string="Aren." attrs="{'readonly':[('glass_order_id','!=', False)]}"/>
            </field>
            <!-- <field name="polished_id" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field> -->
            <!-- <field name="entalle" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field> -->
            <!-- <field name="lavado" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field> -->
             <field name="template" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="packed" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <!-- <field name="insulado" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field> -->
           <!--  <field name="arenado" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field> -->
            <field name="perimeter" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>
            <field name="area" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
                </field>

            <xpath expr="//button[@name='save_calculator']" position="attributes">
                <attribute name="attrs">{'invisible':[('is_locked','=',True)]}</attribute>               
            </xpath>

        </field>
    </record>

    <record id="glass_calculator_services_form" model="ir.ui.view">
        <field name="name">glass.sale.calculator.services.form</field>
        <field name="model">glass.sale.calculator</field>
        <field name="inherit_id" ref="sale_calculadora_it.glass_calculator_services_form"/>
        <field name="arch" type="xml">

            <field name="total_perimeter" position="before">
                <field name="is_locked" invisible="1"/>
            </field>

             <field name="line_ids" position="attributes">
                <attribute name="attrs">{'readonly':[('is_locked','!=',False)]}</attribute>
            </field>

            <xpath expr="//field[@name='line_ids']/tree/field[@name='area']" position="after">
                <field name="glass_order_id" string="O.P." readonly="1"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='quantity']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='crystal_num']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='base1']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='base2']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='height1']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='height2']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='descuadre']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='page_number']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='page_number']" position="after">
                <field name="entalle" string="Ent." attrs="{'readonly':[('glass_order_id','!=', False)]}"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='template']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='perimeter']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='area']" position="attributes">
                <attribute name="attrs">{'readonly':[('glass_order_id','!=', False)]}</attribute>
            </xpath>
             <xpath expr="//button[@name='save_calculator']" position="attributes">
                <attribute name="attrs">{'invisible':[('is_locked','=',True)]}</attribute>               
            </xpath>
        </field>
    </record>

    <!-- glass.sale.calculator.line inherit form view -->
    <record id="calculator_line_view_form" model="ir.ui.view">
      <field name="name">glass.sale.calculator.line.inherit.view.form</field>
      <field name="model">glass.sale.calculator.line</field>
      <field name="inherit_id" ref="sale_calculadora_it.calculator_line_view_form"/>
      <field name="arch" type="xml">
        <field name="page_number" position="after">
            <field name="polished_id"/>
            <field name="arenado"/>
            <field name="lavado"/>
            <field name="entalle"/> 
        </field>
      </field>
    </record>

</odoo>